<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use App\Http\Requests;
use App\Http\Requests\<code>model_name</code>Request;
use App\Models\<code>model_name</code>;

class <code>model_name</code>Controller extends Controller
{

    public $my_values = [
        'yes_no' => [
            1 => 'نعم',
            0 => 'لا',
        ],
    ]
    public function __construct()
    {
        //$this->middleware('auth');
        //$this->middleware('acl');
    }

    public function search()
    {
        return View('<code>lower_case_model_name</code>.search')->with(['my_values' => $this->my_values]);
    }

    public function index()

    {
        // DB::row is used to fix order by full_name
        //$<code>lower_case_model_name</code>s = <code>model_name</code>::withTrashed()->search()->sort()->select('*', \DB::raw('CONCAT_WS(" ", name1, name2, name3, name4) AS full_name'))->paginate();

        $<code>lower_case_model_name</code>s = <code>model_name</code>::withTrashed()->search()->sort()->paginate();

        return View('<code>lower_case_model_name</code>.index')->with(['<code>lower_case_model_name</code>s' => $<code>lower_case_model_name</code>s,'my_values' => $this->my_values]);
    }

    public function create()
    {
        return View('<code>lower_case_model_name</code>.create')->with(['my_values' => $this->my_values]);
    }

    public function store(<code>model_name</code>Request $request)
    {
        $<code>lower_case_model_name</code> = <code>model_name</code>::create($request->all());

        return redirect()->route('<code>lower_case_model_name</code>.show', ['id'=> $<code>lower_case_model_name</code>-><code>primary_key</code>]);
    }

    public function show($id)
    {
        $<code>lower_case_model_name</code> = <code>model_name</code>::withTrashed()->findOrFail($id);

        return View('<code>lower_case_model_name</code>.show')->with(['<code>lower_case_model_name</code>' => $<code>lower_case_model_name</code>,'my_values' => $this->my_values]);
    }

    public function edit($id)
    {
        $<code>lower_case_model_name</code> = <code>model_name</code>::withTrashed()->findOrFail($id);

        return View('<code>lower_case_model_name</code>.edit')->with(['<code>lower_case_model_name</code>' => $<code>lower_case_model_name</code>,'my_values' => $this->my_values]);
    }

    public function update($id, Requests\<code>model_name</code>Request $request)
    {
        $<code>lower_case_model_name</code> = <code>model_name</code>::withTrashed()->findOrFail($id);

        $<code>lower_case_model_name</code>->update($request->all());

        return redirect()->back();
    }


    public function destroy($id)
    {
        $<code>lower_case_model_name</code> = <code>model_name</code>::withTrashed()->findOrFail($id);

        $<code>lower_case_model_name</code>->delete();

        return redirect()->back();
    }

    public function restore($id)
    {
        $<code>lower_case_model_name</code> = <code>model_name</code>::withTrashed()->findOrFail($id);

        $<code>lower_case_model_name</code>->restore();

        return redirect()->back();
    }
}
